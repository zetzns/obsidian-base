> [!important] 
> После подачи питания система запускается с кода `boot ROM`, записанного в постоянную и неперезаписываемую память. `Boot ROM` извлекает из NAND-памяти устройства загрузчик и передаёт управление ему. Чаще всего роль загрузчика выполняет `aboot`  со встроенной поддержкой протокола `fast boot`, но производитель мобильного чипа имеет право выбрать любой другой загрузчик на его вкус. 

> [!attention] 
> Протокол `fastboot` представляет собой систему управления загрузчиком с ПК. Здесь возможно разблокировать загрузчик, перепрошить ядро, recovery и прочие действия над системой.

Смысл `fastboot`состоит в предоставление возможности откатить устройство в случае его поломки, так как этот раздел останется на месте при любом раскладе.

> [!important] 
> Получив уведомление, `aboot` читает таблицу разделов и передаёт управление **ядру**, прошитому в разделе `boot`, которое в свою очередь начинает загрузку либо Android, либо recovery.

> [!new] 
> ***NAND-память*** в Android-устройствах поделена на семь* условно-обязательных разделов. Некоторые из них дублируются, если устройство использует AB-разметку разделов, когда хранятся одновременно две копии ОС, которые меняются местами при обновление. Вот эти разделы:
> - `boot` - содержит ядро и RAM-диск, а на устройствах с A/B-разметкой ещё и консоль восстановления (recovery).
> -  `recovery` - консоль восстановления. Состоит из ядра, набора консольных утилит и файла настроек.
> - `vbmeta` - спец раздел для Verified Boot 2.0 (с контрольными суммами компонентов системы)
> - `system` - содержит саму ОС, библиотеки, системные приложения, обои, рингтоны...
> - `vendor` - драйверы и все необходимые прослойки для работы с железом
> - `userdata` - настройки, приложения и данные пользователей
> - `cache` - кэш :)

Сама структура обычно просто определена в соответствующем файле.
```C
static struct partition partitions[] = {
	{"-", 128},
	{"xloader", 128},
	...
}
```

> [!fact] 
> Среди прочих очень важен раздел `misc`. Существует он только для одной цели - указать загрузчику откуда выполнять запуск: `boot` или `recovery`. Если раздел `misc` стёрт - загружается Android, иначе - `Ubuntu touch`.

---
---
Раздел [[От кнопки включения до рабочего стола]]

