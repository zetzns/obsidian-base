
> [!new] 
> `AFL++` (American Fuzzy Lop ++) — это мощный фаззер, созданный на основе оригинального AFL. Он используется для автоматического поиска багов и уязвимостей в программном обеспечении путем генерирования и подачи на вход программы разнообразных тестов.

#### **Основные особенности:**

- Поддержка различных компиляторов, включая `afl-clang-fast`, `afl-gcc`, `afl-clang-lto`.
- Поддержка множества режимов, включая QEMU и FRIDA, для фаззинга бинарных файлов и динамической инструментализации.
- Улучшенные стратегии мутаций и производительности по сравнению с оригинальным AFL.
- Поддержка параллельного фаззинга и распределенных систем.

#### **Как работает AFL++?**

1. **Сборка программы с инструментализацией:** Программа компилируется с использованием специальных компиляторов (`afl-clang-fast`, `afl-gcc`), которые вставляют в код хуки для мониторинга покрытия кода.
2. **Запуск фаззинга:** AFL++ генерирует входные данные и анализирует, насколько глубоко программа их обрабатывает, ищет новые пути выполнения.
3. **Отчет об ошибках:** Если программа крашится или зависает на определенных данных, AFL++ сохраняет эти входные данные для дальнейшего анализа.

#### **Основные компоненты:**

- **afl-fuzz:** Основной инструмент для фаззинга.
- **afl-showmap:** Инструмент для отображения покрытия кода.
- **afl-tmin:** Минимизатор входных данных, вызывающих сбои.
- **afl-cmin:** Минимизатор набора данных для фаззинга.

Nice:

1. Минимизация крашей

```shell
afl-tmin -i crashfile -o minimized_crashfile -- ./target_program
```

2. Анализ покрытия

```shell
afl-showmap -o [output_file] -- [target_program] [arguments]
```

 **Выходные данные `afl-showmap`:**
 
Формат вывода включает:
- Смещение или адрес участка кода, который был выполнен.
- Значение, указывающее количество раз, когда этот участок был выполнен.

#### **Полезные параметры и опции:**

- `-m none`: Отключение лимита памяти (используйте осторожно).
- `-t 1000+`: Установка тайм-аута в миллисекундах на каждое выполнение.
- `-M master -S slave`: Настройка параллельного фаззинга с мастер-слейв конфигурацией.
## Установка и запуск

Качаем

```shell
sudo docker pull aflplusplus/aflplusplus
```

Запускаем

```shell
sudo docker run --rm -it -v <Абсолютный путь к директории с тестируемой программой>:/mnt aflplusplus/aflplusplus
```

Создаём сиды

```shell
mkdir seeds
for i in {0..4}; do dd if=/dev/urandom of=seed_$i bs=64 count=10; done
mv seed_* /mnt/seeds
```

Запускаем

```shell
`/AFLplusplus/afl-fuzz -i [full path to your seeds directory] -o out -m none -d -- [full path to the executable]`
```

