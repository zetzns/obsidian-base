
> [!important] 
> Для сложных документов используйте многоуровневые эмбеддинги

```json
# Структура документа
document_hierarchy = {
    "document": {
        "sections": [
            {
                "section_embedding": [...],  # Суммарный эмбеддинг раздела
                "paragraphs": [
                    {
                        "paragraph_embedding": [...],
                        "sentences": [
                            {"sentence_embedding": [...], "text": "..."}
                        ]
                    }
                ]
            }
        ]
    }
}
```

> [!important]
> **Стратегия обработки запросов:**
> 
> - Поиск на уровне разделов: найти релевантные части документа
> - Уточнение на уровне абзацев: сузить до конкретных абзацев
> - Точная выборка на уровне предложений: извлечь максимально релевантный фрагмент