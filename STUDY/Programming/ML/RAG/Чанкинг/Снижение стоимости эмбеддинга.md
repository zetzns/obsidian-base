
> [!example] 
> Удаление дубликатов контента:

```python
import hashlib

def get_content_hash(text):
    return hashlib.sha256(text.encode()).hexdigest()

def deduplicate_before_embedding(chunks):
    seen_hashes = set()
    unique_chunks = []
    
    for chunk in chunks:
        chunk_hash = get_content_hash(chunk)
        if chunk_hash not in seen_hashes:
            seen_hashes.add(chunk_hash)
            unique_chunks.append(chunk)
    
    return unique_chunks
```

> [!example] 
> Кэширование эмбеддингов:

```python
import redis

redis_client = redis.Redis(host='localhost', port=6379, db=0)

def get_cached_embedding(text):
    cache_key = f"embed:{get_content_hash(text)}"
    cached = redis_client.get(cache_key)
    if cached:
        return json.loads(cached)
    
    embedding = generate_embedding(text)
    redis_client.setex(cache_key, 86400, json.dumps(embedding))  # 24 часа TTL
    return embedding
```
