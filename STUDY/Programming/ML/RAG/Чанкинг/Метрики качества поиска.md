
> [!example] 
> Оценка релевантности:

```python
def calculate_relevance_score(query, retrieved_chunks, ground_truth):
    # Mean Reciprocal Rank
    mrr_scores = []
    for i, chunk in enumerate(retrieved_chunks):
        if chunk in ground_truth:
            mrr_scores.append(1.0 / (i + 1))
            break
    else:
        mrr_scores.append(0.0)
    
    return sum(mrr_scores) / len(mrr_scores)
```

> [!example] 
> A/B тестирование:

```python
def ab_test_retrieval_strategies(query, strategy_a, strategy_b):
    results_a = strategy_a.search(query)
    results_b = strategy_b.search(query)
    
    # Логируем результаты для сравнения
    log_retrieval_results({
        'query': query,
        'strategy_a_results': results_a,
        'strategy_b_results': results_b,
        'timestamp': datetime.now()
    })
    
    # Возвращаем результаты в зависимости от группы пользователя
    return results_a if user_in_group_a() else results_b
```



