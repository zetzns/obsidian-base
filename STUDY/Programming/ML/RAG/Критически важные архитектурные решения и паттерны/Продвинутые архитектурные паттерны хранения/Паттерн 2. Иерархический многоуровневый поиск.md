```json
document_structure = {
    "document_id": "doc123",
    "levels": {
        "section": {
            "embedding": [...],
            "metadata": {"level": "section", "section_id": "intro"}
        },
        "paragraph": {
            "embedding": [...],
            "metadata": {"level": "paragraph", "parent_section": "intro"}
        },
        "sentence": {
            "embedding": [...],
            "metadata": {"level": "sentence", "parent_paragraph": "intro_p1"}
        }
    }
}
```

> [!example] 
> Умная стратегия поиска:

```python
def hierarchical_search(query, max_results=5):
    query_embedding = embed_text(query)
    
    # 1. Ищем среди разделов
    section_results = vector_db.search(
        query_embedding, 
        filter={"level": "section"}, 
        k=10
    )
    
    # 2. Если раздел релевантен — углубляемся
    if section_results[0].score > 0.8:
        paragraph_results = vector_db.search(
            query_embedding,
            filter={
                "level": "paragraph", 
                "parent_section": section_results[0].metadata['section_id']
            },
            k=max_results
        )
        return paragraph_results
    
    # 3. Иначе делаем широкий поиск
    return vector_db.search(query_embedding, k=max_results)
```
